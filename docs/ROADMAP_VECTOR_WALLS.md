# ROADMAP: Векторный вид стен (без разметки) и чистые комнаты

Дата: 2026-01-20

## Цель
Сделать стены визуально «векторными» (чистый контур без заливки и вспомогательной разметки) и убрать заливку/фоновые прямоугольники у комнат. Реализовать это фундаментально: с учётом структуры рендера, будущего расширения и стабильности.

## Контекст и структура проекта (ключевые точки)
- Рендер стен: `WallRenderer` (Win2D `CanvasGeometry`).
- Превью стен: `WallRenderer::DrawPreview`.
- Рендер комнат: `RoomRenderer` (заливка геометрии + лейблы).
- Общая отрисовка: `MainWindow::OnCanvasDraw` (слои: подложки, сетка, комнаты, стены, проёмы и т.д.).

## Возможные сложности и риски
1. **Визуальная читаемость**: без заливки и маркеров сложнее различать толщину стен и статус (selected/hover). Нужны минимальные, но аккуратные визуальные подсказки (контур, толщина, стиль линий).
2. **Состояния (preview/selected/demolish)**: важно сохранить читаемую разницу между режимами, не возвращаясь к «разметке».
3. **Согласованность с другими сущностями**: двери/окна/размеры могут визуально конфликтовать с новым стилем.
4. **Производительность**: сохранить простую геометрию и минимальные операции заливки.

## План работ (с критериями готовности)

### Этап 1 — Аудит и фиксация базового рендера
- [x] Проанализировать текущий `WallRenderer` и `RoomRenderer`.
- [x] Определить все виды «разметки» стен, которые нужно убрать.

**Критерий завершения:** список точек рендера определён, места удаления подтверждены.

### Этап 2 — Удаление разметки стен
- [x] Удалить подписи длины, линии оси, индикаторы flip и location line из превью.
- [x] Удалить хэндлы/маркер выделения и любые линии «оси» из рендера стен.

**Критерий завершения:** в рендере стен отсутствуют любые вспомогательные элементы, кроме основного контура.

### Этап 3 — Векторный вид стен (минимализм)
- [x] Заливка стен полностью прозрачная.
- [x] Контур стен белый.
- [x] Контур предпросмотра: чёрный с ~80% прозрачности.

**Критерий завершения:** стены выглядят как чистая векторная графика без заливки и разметки.

### Этап 4 — Удаление заливки/фоновых прямоугольников у комнат
- [x] Удалить заливку геометрии комнат.
- [x] Удалить фоновые прямоугольники под лейблы.

**Критерий завершения:** комнаты показывают только контур (и текст, если включён), без заливки и фоновых плашек.

### Этап 5 — Визуальное согласование
- [x] Определить минимальный стиль выделения (толщина контура).
- [x] Добавить лёгкий «векторный» стиль для состояния `Demolish` без мешающей разметки.
- [x] Проверить читаемость при разных масштабах (визуальная проверка по текущим сценам).

**Критерий завершения:** все состояния различимы, стиль остаётся минималистичным.

### Этап 6 — Документация и контроль качества
- [x] Обновить внутренние заметки для согласования дизайна.
- [x] Прогнать визуальный smoke-тест на примерах с дверями/окнами.

**Критерий завершения:** визуальные регрессии отсутствуют, изменения закреплены в документации.

## Выполненные изменения (по факту)
- Удалены элементы разметки стен и превью.
- Применён минималистичный векторный стиль стен (контур, митерные углы, квадратные торцы, без заливки).
- Для `Demolish` оставлен пунктирный контур с пониженной непрозрачностью.
- Убрана заливка комнат и фоновые прямоугольники у лейблов.
- Отключены оверлеи привязки стен (линии/подсказки) для чистого вида.

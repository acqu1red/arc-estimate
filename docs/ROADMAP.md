# ARC-Estimate Roadmap v2.0

> **Проект:** ARC-Estimate — 2D инструмент архитектурного проектирования в стиле Revit  
> **Стек:** WinUI 3 + C++/WinRT + Win2D  
> **Дата начала:** 2025-01-20  
> **Последнее обновление:** 2026-01-20
> **Предыдущий Roadmap:** [ROADMAP_v1_COMPLETED.md](ROADMAP_v1_COMPLETED.md) — завершён

---

## 📋 Обзор текущего состояния

---

## 🧭 UI Rebuild 2026 — Полная переработка панелей

**Цель:** привести интерфейс к референсам (верхняя лента в стиле Revit, компактные панели, перенос инструментов и свойств).

### Этапы реализации

1. [x] **Аудит текущей компоновки UI**
  - Проверить `MainWindow.xaml` на наличие верхнего меню, левой панели инструментов и правой панели свойств.
  - Зафиксировать актуальные обработчики кликов и названия `x:Name` элементов.
  - **Критерий завершения:** список UI-зон и их привязок к коду подтверждён.

2. [x] **Новый верхний Ribbon и File Flyout**
  - Заменить `MenuBar` на TabView-ленту.
  - Сделать кнопку **Файл** с кастомным Flyout (создание проекта, импорт/экспорт, сохранение).
  - **Критерий завершения:** File Flyout отображается с текущими действиями.

3. [x] **Перенос инструментов в вкладку “Архитектура”**
  - Переместить кнопки: выбор, стена, дверь, окно, размер, trim/extend, split, колонна, перекрытие, балка.
  - **Критерий завершения:** все инструменты доступны сверху и работают.

4. [x] **Перенос панели свойств влево и удаление правой**
  - Удалить правую панель.
  - Разместить свойства/слои/выбор элемента в левой панели.
  - Убрать отображение названия проекта из панели.
  - **Критерий завершения:** все свойства доступны слева, справа панели нет.

5. [x] **Уменьшение масштаба UI-панелей**
  - Снизить ширину левой панели.
  - Уменьшить размеры/шрифты элементов ленты.
  - **Критерий завершения:** панели визуально компактные как на референсе.

6. [x] **Визуальная полировка и согласование плотности**
  - Выравнивание отступов, группировка Ribbon.
  - **Критерий завершения:** лента читабельна, группы визуально разделены.

### ✅ Завершённые этапы (v1.0)
| Milestone | Описание | Статус |
|-----------|----------|--------|
| M0-M9.5 | Базовая функциональность | ✅ Завершено |
| Стены | Рисование, типы, материалы | ✅ Завершено |
| Размеры | Авто и ручные размеры | ✅ Завершено |
| Импорт | DXF и IFC файлы | ✅ Завершено |
| Экспорт | Excel/CSV сметы, PDF чертежи | ✅ Завершено |
| Сохранение | JSON проекты (.arcp) | ✅ Завершено |

### ✅ Исправленные недоработки (v2.0)

1. ~~Соединения стен~~ — ✅ Реализовано: WallJoinSystem с митра-углами, Trim/Extend/Split
2. ~~Интерфейс~~ — ✅ Реализовано: Ribbon UI, панели свойств, браузер проекта
3. ~~Размерные линии~~ — ✅ Реализовано: засечки/стрелки/точки, угловые размеры при рисовании
4. **Архитектурные инструменты** — 🔄 Частично: модели Door/Window готовы, нет инструментов размещения
5. **Помещения и зоны** — ⏳ Не начато
6. **Аннотации** — ⏳ Не начато

---

## 🎯 Новые Milestones (v2.0)

| Milestone | Описание | Приоритет | Статус |
|-----------|----------|-----------|--------|
| **R1** | Revit-подобный интерфейс (Ribbon UI) | 🔴 Высокий | ✅ Завершено |
| **R2** | Система соединений стен с дорисовкой углов | 🔴 Высокий | ✅ Завершено |
| **R3** | Профессиональные размерные линии | 🔴 Высокий | ✅ Завершено |
| **R4** | Двери и окна (проёмы) | 🔴 Высокий | ✅ Завершено |
| **R5** | Помещения и зоны | 🟠 Средний | ✅ Завершено |
| **R6** | Колонны и перекрытия | 🟠 Средний | ⏳ Не начато |
| **R7** | Анимации и визуальный дизайн | 🟡 Низкий | ⏳ Не начато |
| **R8** | Расширенные аннотации | 🟡 Низкий | ⏳ Не начато |
| **R9** | Производительность и оптимизация | 🟡 Низкий | ⏳ Не начато |

---



## R1 — Revit-подобный интерфейс (Ribbon UI) ✅ ЗАВЕРШЕНО

### Описание
Полная переработка интерфейса для соответствия стандартам Revit. Лента (Ribbon) с вкладками, контекстные панели инструментов, панель свойств слева, браузер проекта справа.

### Задачи

#### R1.1 — Ribbon (лента инструментов) ✅
- [x] Создать TabView для основных разделов ленты:
  - **Файл** — Создать, Открыть, Сохранить, Экспорт, Печать, Параметры
  - **Архитектура** — Стена, Дверь, Окно, Колонна, Крыша, Пол/Перекрытие, Потолок, Лестница
  - **Конструкция** — Несущие элементы
  - **Вставить** — Импорт DXF/IFC, Изображения, CAD файлы
  - **Аннотации** — Размеры, Текст, Марки, Легенда
  - **Вид** — Планы этажей, 3D виды, Фасады, Разрезы
  - **Управление** — Материалы, Стили, Параметры проекта
- [x] Группировка инструментов в панели (как в Revit)
- [x] Большие иконки (32x32) для основных инструментов
- [x] Выпадающие меню для вариантов инструмента
- [x] Контекстная вкладка "Изменить" при выделении элемента

#### R1.2 — Панель параметров (Options Bar) ✅
- [x] Создать горизонтальную панель под лентой
- [x] Отображение параметров текущего инструмента:
  - Стена: Высота, Привязка, Цепь, Смещение, Радиус (для дуг)
  - Дверь/Окно: Тип, Высота, Смещение от пола
  - Размер: Тип размера, Стиль текста
- [x] ComboBox для выбора типа стены прямо на панели
- [x] Чекбокс "Цепь" для непрерывного рисования
- [x] Статус соединения стен (автоматическое/запрет)

#### R1.3 — Панель свойств (Properties Panel) — слева ✅
- [x] Перенести панель свойств влево (как в Revit)
- [x] Секция "Зависимости":
  - Линия привязки (Location Line)
  - Уровень снизу/сверху
  - Смещение снизу/сверху
- [x] Секция "Размеры":
  - Длина (только чтение)
  - Площадь (только чтение)
  - Объём (только чтение)
- [x] Секция "Идентификация":
  - Тип элемента
  - Имя/метка
  - Комментарий
- [x] Кнопка "Изменить тип" для открытия редактора

#### R1.4 — Браузер проекта (Project Browser) — справа ✅
- [x] Древовидная структура:
  - Виды (все): Планы этажей
  - Семейства (типы стен)
  - Слои проекта
- [x] Двойной клик для открытия вида
- [x] Контекстное меню для типов

#### R1.5 — Статусная строка ✅
- [x] Координаты X, Y в мм
- [x] Текущий масштаб (1:100)
- [x] Подсказки по текущему действию
- [x] Индикатор режима привязки
- [x] Быстрый выбор масштаба

#### R1.6 — Тёмная тема (отложено)
- [ ] Поддержка тёмной темы (как в Revit 2025)
- [ ] Переключатель тем в настройках

### Критерии приёмки ✅
- [x] Интерфейс визуально похож на Revit
- [x] Все инструменты доступны через ленту
- [x] Панели можно сворачивать/разворачивать
- [x] Русские подписи везде

---

## R2 — Система соединений стен с дорисовкой углов ✅ ЗАВЕРШЕНО

### Описание
Полноценная система соединений стен как в Revit: автоматическая дорисовка углов, обрезка/удлинение стен при соединении, визуальный feedback при рисовании.

### Задачи

#### R2.1 — Типы соединений ✅
- [x] **L-соединение (угол)** — две стены встречаются под углом:
  - Внешние грани продлеваются до пересечения
  - Внутренние грани обрезаются
  - Автоматический расчёт точки пересечения
- [x] **T-соединение (примыкание)** — одна стена упирается в другую:
  - Примыкающая стена обрезается по грани основной
  - Основная стена остаётся целой
  - Учёт толщины обеих стен
- [x] **X-соединение (пересечение)** — две стены пересекаются
- [x] **Колинеарное соединение** — стены на одной оси

#### R2.2 — Режимы линии привязки (Location Line) ✅
- [x] Влияние на геометрию соединения:
  - **Осевая линия стены** — соединение по осям
  - **Наружная чистовая** — внешние грани совпадают
  - **Внутренняя чистовая** — внутренние грани совпадают
  - **Осевая линия несущего слоя** — ось по несущей части
  - **Наружная несущая** — внешняя грань несущего слоя
  - **Внутренняя несущая** — внутренняя грань несущего слоя
- [x] Визуализация линии привязки при рисовании (пунктир)
- [x] Сохранение выбранного режима

#### R2.3 — Геометрия углов ✅
- [x] Расчёт контура стены с учётом соединений
- [x] Алгоритм расчёта вершин угла:
  - Найти точку пересечения осей
  - Вычислить смещения от осей для каждой стены
  - Построить контур угла с правильным скосом/митром
- [x] Типы стыков углов:
  - **Митра (miter)** — скос под углом
  - **Встык (butt)** — одна стена перекрывает другую
  - **Скос (bevel)** — произвольный угол скоса

#### R2.4 — Визуальная обратная связь при рисовании ✅
- [x] Превью соединения ДО клика:
  - Показать как будет выглядеть угол
  - Подсветка точки привязки
- [x] Показ угла между стенами:
  - Дуга с градусной меткой
  - Цветовое выделение для углов не 90 градусов
- [x] Показ длины стены при рисовании
- [x] Бэйдж типа соединения (L/T/X/—)

#### R2.5 — Команды соединения ✅
- [x] **Соединить/Разъединить стены** — реализовано через флаги DisallowJoin
- [x] **Обрезать/Удлинить** (Trim/Extend) — `TrimExtendTool` в EditTools.h
- [x] **Разделить стену** (Split) — `SplitTool` в EditTools.h

#### R2.6 — Настройки соединений ✅
- [x] Глобальные настройки (в `JoinSettings`):
  - Автоматическое соединение (AutoJoinEnabled)
  - Радиус поиска соединений (JoinTolerance)
  - Тип стыка по умолчанию (DefaultStyle)
  - Показ превью (ShowJoinPreview)
  - ExtendToMeet
- [x] Сохранение/загрузка настроек в проекте

### Критерии приёмки ✅
- [x] Углы дорисовываются автоматически при соединении
- [x] Визуально соответствует Revit
- [x] Location Line влияет на геометрию соединения
- [x] Превью показывает будущий угол до клика
- [x] Работает для всех 6 режимов линии привязки
- [x] Инструменты Trim/Extend и Split работают корректно

---

## R3 — Профессиональные размерные линии ✅ ЗАВЕРШЕНО

### Описание
Размерные линии по стандартам архитектурного черчения с правильным отображением, угловыми размерами, цепочками размеров.

### Задачи

#### R3.1 — Стандартный вид размеров ✅
- [x] Улучшенный рендеринг:
  - Выносные линии с отступом от объекта
  - Размерная линия со стрелками/засечками
  - Текст над линией или с разрывом
  - Чёткие тонкие линии
- [x] Типы стрелок/маркеров (DimensionTickType):
  - Засечки (Tick — architectural tick)
  - Стрелки (Arrow — полноценная реализация)
  - Точки (Dot)

#### R3.2 — Линейные размеры ✅
- [x] Улучшенные авторазмеры стен (AutoDimensionManager)
- [x] Цепочки размеров с автообновлением (DimensionChain)
- [x] Ручные размеры (DimensionTool)
- [x] Сохранение offset и tickType для размеров

#### R3.3 — Угловые размеры ✅
- [x] Класс AngularDimension:
  - Центр, начальная и конечная точки
  - GetAngleRadians(), GetAngleDegrees()
  - Радиус дуги для отображения
  - HitTest по дуге
- [x] Размер угла между двумя стенами:
  - Дуга с градусами
  - Показ при рисовании
  - Автоматический расчёт угла

#### R3.4 — Радиальные размеры ⏳ (отложено)
- [ ] Размер радиуса дуги (для будущих дуговых стен)
- [ ] Размер диаметра

#### R3.5 — Интеллектуальное размещение ⏳ (отложено)
- [ ] Автоматический выбор стороны размещения
- [ ] Избежание наложения размеров

#### R3.6 — Отображение при рисовании стены ✅
- [x] Динамический размер длины стены
- [x] Угол направления:
  - Дуга от горизонтали
  - Градусы (135.00°)
  - Зелёный для углов кратных 45°
- [x] Пунктирная горизонтальная линия-референс
- [x] Временные размеры при рисовании

### Критерии приёмки ✅
- [x] Угловые размеры показываются при рисовании
- [x] Размеры выглядят профессионально (засечки, стрелки, точки)
- [x] Цепочки размеров работают корректно

---

## R4 — Двери и окна (проёмы) ✅ ЗАВЕРШЕНО

### Описание
Полноценная система дверей и окон с размещением в стенах, семействами типов, корректной визуализацией.

### Задачи

#### R4.1 — Модель двери ✅
- [x] Класс Door (в Opening.h):
  - Ширина проёма (мм)
  - Высота проёма (мм)
  - Высота от пола (SillHeight = 0)
  - Тип открывания (DoorSwingType: Left/Right, Inward/Outward, Double, Sliding, Folding)
  - Связь со стеной (hostWallId)
  - Позиция на стене (0.0-1.0)
  - Угол открывания (swingAngle)
  - Толщина полотна (leafThickness)
- [x] Семейства дверей (через DoorSwingType):
  - Одностворчатая (LeftInward, RightInward, LeftOutward, RightOutward)
  - Двустворчатая (DoubleInward, DoubleOutward)
  - Раздвижная (Sliding)
  - Складная (Folding)
- [x] DoorType каталог с ценами (GetDoorTypes, AddDoorType)

#### R4.2 — Модель окна ✅
- [x] Класс Window (в Opening.h):
  - Ширина проёма (мм)
  - Высота проёма (мм)
  - Высота подоконника (sillHeight = 900)
  - Тип окна (WindowType: Single, Double, Triple, Fixed, Panoramic, Skylight)
  - Связь со стеной (hostWallId)
  - Позиция на стене (0.0-1.0)
  - Глубина рамы (frameDepth)
  - Ширина рамы (frameWidth)
  - Площадь остекления (GetGlazingAreaSqM)
- [x] Семейства окон (через WindowType):
  - Одностворчатое (Single)
  - Двустворчатое (Double)
  - Трёхстворчатое (Triple)
  - Глухое (Fixed)
  - Панорамное (Panoramic)
  - Мансардное (Skylight)
- [x] WindowType_ каталог с ценами (GetWindowTypes, AddWindowType)

#### R4.3 — Размещение в стене ✅
- [x] DoorPlacementTool (в OpeningTools.h):
  - FindWallAtPoint() — поиск стены под курсором
  - UpdatePreview() — обновление превью при движении мыши
  - TryPlace() — размещение двери по клику
  - ToggleFlip() — переворот двери (Spacebar)
- [x] WindowPlacementTool (в OpeningTools.h):
  - Аналогичная функциональность для окон
- [x] Привязка к стене (не размещается вне стены)
- [x] Интеграция в MainWindow (OnDoorToolClick, OnWindowToolClick)
- [x] Обработка в HandleToolClick

#### R4.4 — Визуализация ✅
- [x] OpeningRenderer (в OpeningRenderer.h):
  - DrawDoors() — отрисовка всех дверей
  - DrawWindows() — отрисовка всех окон
  - DrawDoor() — дверь с прямоугольником проёма + дуга открывания
  - DrawWindow() — окно с рамой, стеклом и импостами
  - DrawDoorPreview() — превью при размещении
  - DrawWindowPreview() — превью при размещении
- [x] Интеграция в OnCanvasDraw

#### R4.5 — Интеграция со сметой ✅
- [x] Авторазмеры учитывают проёмы (цепочки размеров в RebuildAutoDimensions)
- [x] DoorType.UnitCost — стоимость двери
- [x] WindowType_.CostPerSqM — стоимость окна за м²
- [ ] Расширение EstimationEngine для дверей/окон (TODO)

### Критерии приёмки ✅
- [x] Модели Door и Window реализованы
- [x] Двери/окна размещаются только в стенах
- [x] Проёмы корректно отображаются
- [x] Дуга открывания показывается для дверей
- [x] Размерные линии разбиваются на сегменты при наличии проёмов

---

## R5 — Помещения и зоны ✅ ЗАВЕРШЕНО

### Описание
Автоматическое определение помещений по замкнутым контурам стен, расчёт площадей, маркировка.

### Задачи

#### R5.1 — Распознавание помещений ✅
- [x] Алгоритм поиска замкнутых контуров:
  - Граф стен с соединениями
  - Поиск минимальных циклов
  - Определение внутренних областей
- [x] Автоматическое создание помещений
- [x] Обновление при изменении геометрии

#### R5.2 — Модель помещения ✅
- [x] Класс Room (Room.h):
  - Контур (полигон)
  - Название
  - Номер
  - Площадь (авто) — GetArea(), GetAreaSqM()
  - Периметр (авто) — GetPerimeter(), GetPerimeterM()
  - Объём (авто) — GetVolume(), GetVolumeCuM()
  - Площадь стен — GetWallArea(), GetWallAreaSqM()
  - Высота потолка — GetCeilingHeight()
  - Уровень пола — GetFloorLevel()
  - Тип отделки — GetFinishType(), GetFloorFinish(), GetCeilingFinish(), GetWallFinish()
  - Категория — RoomCategory (Living, Wet, Service, Circulation, Balcony, Office)
- [x] Границы помещения:
  - RoomBoundary структура (ElementId, Type, StartPoint, EndPoint, Length)
  - RoomBoundaryType enum (Wall, Separator, Opening)
  - GetBoundingWallIds(), IsBoundedByWall()
- [x] Позиция метки:
  - GetLabelPoint() — автоцентр или пользовательская
  - SetLabelPosition(), ResetLabelPosition()

#### R5.3 — Визуализация ✅
- [x] RoomRenderer (RoomRenderer.h):
  - Заливка помещения (полупрозрачная)
  - Метка с названием и площадью
  - Hover-эффект при наведении
  - Цветовая схема по типу помещения (кухня, ванная, спальня и т.д.)
  - RoomDisplaySettings для настройки отображения
- [x] Интеграция в MainWindow:
  - m_roomRenderer, m_hoverRoomId
  - HitTest для помещений
  - Отображение в статусной строке при выборе

#### R5.4 — Марка помещения ⏳
- [x] Автоматическое размещение марки (центроид)
- [x] Содержимое марки:
  - Номер
  - Название
  - Площадь (м²)
- [ ] Перемещение марки пользователем (UI)

#### R5.5 — Зоны ✅
- [x] Группировка помещений в зоны:
  - Жилая зона (Living)
  - Мокрые помещения (Wet)
  - Технические (Service)
  - Коридоры (Circulation)
  - Открытые (Outdoor)
  - Пользовательские (Custom)
- [x] Расчёт площади зоны (сумма площадей помещений)
- [x] Модель Zone (Zone.h):
  - ZoneType enum
  - ZoneManager для автогруппировки
  - ZoneSummary для отчётов
- [x] Экспорт в смету по зонам:
  - ZoneQuantitySummary в EstimationEngine
  - Экспорт сводки по зонам в CSV
  - Расчёт стоимости отделки по типу зоны
- [x] Сериализация пользовательских зон

#### R5.6 — Сериализация ✅
- [x] SerializeRooms / DeserializeRooms в ProjectSerializer
- [x] Сохранение пользовательских данных (название, номер, отделка)
- [x] Сопоставление по центроиду при загрузке

### Критерии приёмки
- [x] Помещения создаются автоматически
- [x] Площади рассчитываются корректно
- [x] Марки помещений отображаются
- [x] Смета включает данные по помещениям/зонам

---

## R6 — Колонны и перекрытия

### Описание
Дополнительные архитектурные элементы: колонны, перекрытия, балки.

### Задачи

#### R6.1 — Колонны ✅
- [x] Класс Column:
  - Сечение (прямоугольник/круг)
  - Размеры сечения
  - Высота
  - Позиция
  - Поворот
- [x] Размещение:
  - По сетке осей (через привязки)
  - Свободное размещение
  - Привязка к пересечениям (SnapManager)
  - ColumnTool для размещения
- [x] Визуализация (StructureRenderer)

#### R6.2 — Перекрытия ✅
- [x] Класс Slab (Floor):
  - Контур (полигон)
  - Толщина
  - Тип конструкции
  - Уровень
- [x] SlabTool (рисование полигона)
- [x] HitTest и Selection для перекрытий
- [ ] Автоматическое создание по контуру помещения
- [ ] Проёмы в перекрытии

#### R6.3 — Визуализация ✅
- [x] Колонны: вид сверху с сечением (StructureRenderer)
- [x] Перекрытия: штриховка области (полупрозрачная заливка)
- [x] Балки: линии с толщиной

#### R6.5 — Балки ✅
- [x] Класс Beam (Element)
- [x] BeamTool (рисование линии)
- [x] Визуализация и сериализация

#### R6.6 — Свойства и редактирование ⏳
- [x] Выбор колонн и перекрытий (HitTest)
- [x] Отображение информации в панели свойств (минимально)
- [ ] Редактирование параметров в UI (размеры, поворот, толщина)

#### R6.7 — Сериализация ✅
- [x] SerializeColumns / DeserializeColumns
- [x] SerializeSlabs / DeserializeSlabs
- [x] SerializeBeams / DeserializeBeams
- [x] Интеграция в ProjectSerializer.h

### Критерии приёмки
- [x] Колонны размещаются и отображаются
- [x] Перекрытия создаются по контуру
- [x] Элементы учитываются в смете (сериализация)

---

## R7 — Анимации и визуальный дизайн

### Описание
Улучшение визуального опыта: плавные анимации, современный дизайн, полировка UI.

### Задачи

#### R7.1 — Анимации переходов
- [ ] Плавное переключение вкладок ленты
- [ ] Анимация открытия/закрытия панелей
- [ ] Анимация при наведении на кнопки
- [ ] Анимация выделения элементов

#### R7.2 — Стили элементов
- [ ] Современные иконки (Fluent Icons)
- [ ] Тени и глубина (elevation)
- [ ] Скругления углов
- [ ] Градиенты для фонов

#### R7.3 — Визуальные эффекты на холсте
- [ ] Плавное масштабирование
- [ ] Плавное панорамирование
- [ ] Glow эффект при наведении
- [ ] Пульсация для активных точек привязки

#### R7.4 — Индикаторы состояния
- [ ] Loading spinner для длительных операций
- [ ] Progress bar для импорта/экспорта
- [ ] Toast уведомления
- [ ] Snackbar для быстрых сообщений

### Критерии приёмки
- [ ] Интерфейс ощущается современным
- [ ] Анимации плавные (60 FPS)
- [ ] Нет резких переходов

---

## R8 — Расширенные аннотации

### Описание
Дополнительные инструменты аннотирования: текст, выноски, марки, легенды.

### Задачи

#### R8.1 — Текстовые заметки
- [ ] Многострочный текст
- [ ] Форматирование (жирный, курсив)
- [ ] Выравнивание
- [ ] Размер и шрифт

#### R8.2 — Выноски (Leaders)
- [ ] Стрелка с текстом
- [ ] Многосегментная линия
- [ ] Изогнутые выноски

#### R8.3 — Марки элементов
- [ ] Марка стены (тип, толщина)
- [ ] Марка двери/окна
- [ ] Автоматическое размещение

#### R8.4 — Легенда
- [ ] Таблица условных обозначений
- [ ] Автогенерация по используемым типам
- [ ] Размещение на листе

### Критерии приёмки
- [ ] Текстовые элементы добавляются на план
- [ ] Выноски корректно отображаются
- [ ] Марки автоматически связаны с элементами

---

## R9 — Производительность и оптимизация

### Описание
Оптимизация для работы с большими проектами (100+ стен, много элементов).

### Задачи

#### R9.1 — Пространственное индексирование
- [ ] Quadtree для hit testing
- [ ] Быстрый поиск элементов в области
- [ ] Кэширование видимых элементов

#### R9.2 — Оптимизация рендеринга
- [ ] Dirty region rendering
- [ ] Level of Detail (LOD) при отдалении
- [ ] Виртуализация для списков

#### R9.3 — Ленивая загрузка
- [ ] Отложенный парсинг больших файлов
- [ ] Прогрессивный импорт DXF/IFC
- [ ] Кэширование геометрии

#### R9.4 — Профилирование
- [ ] Замер времени операций
- [ ] Метрики памяти
- [ ] Лог производительности

### Критерии приёмки
- [ ] 100+ стен без задержек
- [ ] Импорт файлов более 10 МБ
- [ ] Hit testing менее 1 мс

---

## Приоритизация и план реализации

### Фаза 1: Критические улучшения (R1, R2, R3)
**Срок:** 4-6 недель

1. **R2** — Система соединений (2 недели)
   - Приоритет: дорисовка углов критична для работы
   
2. **R3** — Размерные линии (1 неделя)
   - Угловые размеры при рисовании
   
3. **R1** — Ribbon UI (2-3 недели)
   - Основа нового интерфейса

### Фаза 2: Функциональность (R4, R5)
**Срок:** 3-4 недели

4. **R4** — Двери и окна (2 недели)
5. **R5** — Помещения (2 недели)

### Фаза 3: Полировка (R6, R7, R8, R9)
**Срок:** 3-4 недели

6. **R6** — Колонны и перекрытия (1 неделя)
7. **R7** — Анимации (1 неделя)
8. **R8** — Аннотации (1 неделя)
9. **R9** — Производительность (1 неделя)

---

## Связанные документы

- [ROADMAP_v1_COMPLETED.md](ROADMAP_v1_COMPLETED.md) — Завершённый первый roadmap
- [PROGRESS.md](PROGRESS.md) — Журнал разработки
- [DECISIONS.md](DECISIONS.md) — Архитектурные решения
- [Русская_документация.md](Русская_документация.md) — Техническая документация

---

*Документ создан: 2025-01-20*
*Последнее обновление: 2025-01-20*

